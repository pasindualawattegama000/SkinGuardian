{% extends "base.html" %}

{% block title %}Profile{% endblock %}

{% block content %}

<div class="container">

    <div class="user_details">
        <img src="{{ profile_image }}" alt="Profile Image" style="width: 150px; height: 150px;">
        <br>
        
        <button onclick="toggleUpdateImageForm()">Update Profile Image</button>
        <div id="updateImageForm" style="display: none;">
            <form action="{{ url_for('upload') }}" method="post" enctype="multipart/form-data">
                <input type="file" name="profile_image" accept="image/*">
                <input type="submit" value="Update Profile Image">
            </form>
        </div>

        <br><br>
        <h1>{{ account.firstname }} {{ account.lastname }}</h1>
        <p>Email: {{ account.email }}</p>
        
        {% if user_type == 'doctor' %}
        <p>Specialty: {{ account.specialty }}</p>
        {% else %}
        <p>Date of Birth: {{ account.dob | date('Y-m-d') }}</p>
        <p>Gender: {{ account.gender }}</p>
        {% endif %}
        
        <p>Contact: {{ account.contact }}</p>
    </div>

    <button onclick="toggleUpdateInfoForm()">Update Your Information</button>
    <div id="updateInfoForm" style="display: none;">
        <form action="{{ url_for('update_profile') }}" method="post">
            <input type="text" name="firstname" value="{{ account.firstname }}">
            <input type="text" name="lastname" value="{{ account.lastname }}">
            {% if user_type == 'doctor' %}
            <input type="text" name="specialty" value="{{ account.specialty }}">
            {% endif %}
            <input type="text" name="contact" value="{{ account.contact }}">
            <input type="password" name="password" placeholder="New Password">
            <input type="submit" value="Update Information">
        </form>
    </div>
</div>

<script>
    function toggleUpdateInfoForm() {
        var form = document.getElementById("updateInfoForm");
        if (form.style.display === "none") {
            form.style.display = "block";
        } else {
            form.style.display = "none";
        }
    }

    function toggleUpdateImageForm() {
        var form = document.getElementById("updateImageForm");
        if (form.style.display === "none") {
            form.style.display = "block";
        } else {
            form.style.display = "none";
        }
    }
</script>

{% endblock %}
