{% extends "base.html" %}

{% block title %}Doctor List{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='doctorsList.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <h1>Doctors</h1>
    <div class="doctors-list">
        {% for doctor in doctors %}
            <div class="doctor-card">
                <h2>{{ doctor.firstname }} {{ doctor.lastname }}</h2>
                <p><strong>Email:</strong> {{ doctor.email }}</p>
                <p><strong>Specialty:</strong> {{ doctor.specialty }}</p>
                <p><strong>Contact:</strong> {{ doctor.contact }}</p>
                <button onclick="requestDoctor({{ doctor.id }})">Request Doctor</button>
            </div>
        {% else %}
            <p>No doctors found.</p>
        {% endfor %}
    </div>
</div>

<script>
function requestDoctor(doctorId) {
    fetch('/request_doctor/' + doctorId, {
        method: 'POST',
    }).then(response => {
        return response.json();
    }).then(data => {
        if (data.success) {
            alert(data.message);
    
        } else {
            alert(data.error);
        }
    }).catch(error => {
        console.error('Error:', error);
    });
}

</script>

{% endblock %}
